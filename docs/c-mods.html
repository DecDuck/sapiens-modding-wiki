<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C Mods | Sapiens Modding Wiki</title>
    <meta name="description" content="Modding documentation for the Sapiens video game.">
    <link rel="stylesheet" href="/sapiens-modding-wiki/assets/style.c595eb57.css">
    <link rel="modulepreload" href="/sapiens-modding-wiki/assets/app.da2dc732.js">
    <link rel="modulepreload" href="/sapiens-modding-wiki/assets/docs_c-mods.md.944a976f.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-507de226><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-507de226 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-248f78c8><div class="container" data-v-248f78c8><div class="VPNavBarTitle has-sidebar" data-v-248f78c8 data-v-55dd87e7><a class="title" href="/sapiens-modding-wiki/" data-v-55dd87e7><img class="logo" src="/sapiens-modding-wiki/logo.png" data-v-55dd87e7><!--[-->Sapiens Modding Wiki<!--]--></a></div><div class="content" data-v-248f78c8><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-248f78c8 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://www.playsapiens.com/" target="_blank" rel="noopener noreferrer" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->Sapiens Website<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://wiki.playsapiens.com/" target="_blank" rel="noopener noreferrer" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->Official Sapiens Wiki<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-248f78c8 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-248f78c8 data-v-0ae890f7 data-v-c0bcf1c2><!--[--><a class="VPSocialLink" href="https://github.com/SirLich/sapiens-modding-wiki" title="github" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-4231dbfc>github</span></a><a class="VPSocialLink" href="https://discord.gg/WnN8hj2Fyg" title="discord" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg><span class="visually-hidden" data-v-4231dbfc>discord</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-248f78c8 data-v-0562f5c0 data-v-b50b2dea><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b50b2dea><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-b50b2dea><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-b50b2dea><div class="VPMenu" data-v-b50b2dea data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-0562f5c0><div class="item social-links" data-v-0562f5c0><div class="VPSocialLinks social-links-list" data-v-0562f5c0 data-v-c0bcf1c2><!--[--><a class="VPSocialLink" href="https://github.com/SirLich/sapiens-modding-wiki" title="github" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-4231dbfc>github</span></a><a class="VPSocialLink" href="https://discord.gg/WnN8hj2Fyg" title="discord" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg><span class="visually-hidden" data-v-4231dbfc>discord</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-248f78c8 data-v-9a8d4e0a><span class="container" data-v-9a8d4e0a><span class="top" data-v-9a8d4e0a></span><span class="middle" data-v-9a8d4e0a></span><span class="bottom" data-v-9a8d4e0a></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-507de226 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-507de226 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Guides</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/sapiens-modding-wiki/guide/getting-started.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Getting Started</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/guide/shadowing.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Lua Shadows</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/guide/common-issues.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Common Issues</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Documentation</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/sapiens-modding-wiki/docs/coordinates.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Coordinates</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/model-format.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Model Format</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/shaders.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Shaders</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/mod-types.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Mod Types</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/materials.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Materials</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/mobs.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Mobs</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/bridge.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>C++ Bridges</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/cheat.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Cheats</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/creating-ui.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>User Interface</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/game-saves.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Game Saves</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/handling-input.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Input</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/thread-management.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Threading</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/timers.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Timers</span><!--]--><!----></a><a class="VPLink link active" href="/sapiens-modding-wiki/docs/c-mods.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>C Mods</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/docs/notes.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Miscellaneous</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Hammerstone</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/introduction.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Introduction</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/getting-started.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Getting Started</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/installing.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Installing</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/logger.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Logger</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/ui-manager.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>UI Manager</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/locale-manager.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Locale Manager</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/input-manager.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Input Manager</span><!--]--><!----></a><a class="VPLink link" href="/sapiens-modding-wiki/hammerstone/save-state.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>Save State</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-507de226 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-07502c4e><div class="container" data-v-07502c4e><div class="aside" data-v-07502c4e><div class="aside-curtain" data-v-07502c4e></div><div class="aside-container" data-v-07502c4e><div class="aside-content" data-v-07502c4e><div class="VPDocAside" data-v-07502c4e data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#getting-started" data-v-51e5a8ce>Getting started</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#vertex-terrain-generation" data-v-51e5a8ce>Vertex Terrain Generation</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#biome-and-climate-assignment" data-v-51e5a8ce>Biome and Climate assignment</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#particle-engine" data-v-51e5a8ce>Particle Engine</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#common-mistakes" data-v-51e5a8ce>Common mistakes</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-07502c4e><div class="content-container" data-v-07502c4e><!--[--><!--]--><main class="main" data-v-07502c4e><div style="position:relative;" class="vp-doc _sapiens-modding-wiki_docs_c-mods" data-v-07502c4e><div><h1 id="c-mods" tabindex="-1">C Mods <a class="header-anchor" href="#c-mods" aria-hidden="true">#</a></h1><p>Certain tasks are too performance intensive to implement in Lua, these tasks are implemented in C. Currently the following tasks are done in C:</p><ul><li>Vertex Terrain Generation</li><li>Biome and Climate assignment</li><li>Particles</li></ul><h2 id="getting-started" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><details class="details custom-block"><summary>Prerequisites</summary><ul><li><a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">Git</a></li><li><a href="https://visualstudio.microsoft.com/" target="_blank" rel="noopener noreferrer">Visual Studio 2017</a> or later Desktop development with C++ <ul><li>When using a different IDE than Visual Studio for development only the <a href="https://visualstudio.microsoft.com/downloads/?q=build+tools" target="_blank" rel="noopener noreferrer">build tools</a> is enough.</li></ul></li><li><a href="https://cmake.org/" target="_blank" rel="noopener noreferrer">CMake</a> if using the template, or an IDE that has CMake bundled like <a href="https://www.jetbrains.com/clion/" target="_blank" rel="noopener noreferrer">CLion</a></li></ul></details><p>C Mods have a file structure very familiar to normal Lua mods. The root folder contains a <code>modInfo.lua</code> file, exactly like a normal Lua mod. For more information on this check out the <a href="/sapiens-modding-wiki/guide/getting-started.html">Getting Started</a> page. Additionally the root folder contains a <code>lib</code> folder. This lib folder contains library files which the game will load. On windows these library files have the <code>.dll</code> extension.</p><p>The easiest way to get started is by cloning either the <a href="https://github.com/Majic-Jungle/sapiens-mod-creation/" target="_blank" rel="noopener noreferrer">official example repository</a> or the <a href="https://github.com/suppergerrie2/SapiensCModTemplate" target="_blank" rel="noopener noreferrer">template made by suppergerrie2</a>. The template has the benefit of being a clean setup without the other Lua mod examples. Note that both repositories need to be cloned with the <code>--recurse-submodules</code>.</p><h3 id="official-repository" tabindex="-1">Official repository <a class="header-anchor" href="#official-repository" aria-hidden="true">#</a></h3><p>The official example repository contains an example C Mod that can be found in <code>Examples\src\FlatTerrain</code>. The <code>Windows\FlatTerrainMod.sln</code> can be opened in Visual Studio. When opening the project it may ask to be updated to the latest version, let it do that. If it doesn&#39;t ask it and building fails with <code>The build tools for Visual Studio 2017 (Platform Toolset = &#39;v141&#39;) cannot be found</code> you can manually upgrade the project by right clicking the solution and clicking <code>Retarget solution</code>. <img src="/sapiens-modding-wiki/assets/visual-studio-retarget-solution.6abad335.png" alt=""> the mod can be compiled by <code>Build -&gt; Build FlatTerrainMod</code>. This will generate a <code>dll</code> file in <code>Windows\Build\</code>. This <code>dll</code> file should be moved into your mod&#39;s <code>lib</code> folder. <img src="/sapiens-modding-wiki/assets/visual-studio-build-menu.7965e79e.png" alt=""></p><h3 id="template" tabindex="-1">Template <a class="header-anchor" href="#template" aria-hidden="true">#</a></h3><p>If using the template the project can be opened using any IDE that supports CMake, or compiled manually from the command line. The template will combine the <code>modInfo.lua</code> and create the <code>lib</code> folder for you, the resulting folder can be found in the build folder and is named based on the <code>mod id</code> configured at the start.</p><p>The template is setup as a GitHub template, thus it can be easily used to create your own GitHub repository by going to the <a href="https://github.com/suppergerrie2/SapiensCModTemplate" target="_blank" rel="noopener noreferrer">repository</a> and pressing <code>Use this template</code>. This will then ask you to enter the name of your mod and whether it should be public or private and then create the GitHub repository. Copy the Git URL by pressing <code>Code =&gt; Local</code> and then copying the URL.</p><h4 id="command-line-setup" tabindex="-1">Command line setup <a class="header-anchor" href="#command-line-setup" aria-hidden="true">#</a></h4><p>First the repository needs to be cloned.</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">git clone --recurse-submodules </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">your Git URL</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>Then configure the CMake project</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Your GitHub repository name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">cmake -DMOD_ID=MyCMod -DMOD_NAME=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">My C Mod</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -DDESCRIPTION=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">An amazing mod that does things in C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -DDEVELOPER=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Me!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -DDEVELOPER_URL=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -DPREVIEW_FILE=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">preview.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -DMOD_MAJOR_VERSION=1 -DMOD_MINOR_VERSION=2 -DMOD_PATCH_VERSION=3 </span><span style="color:#82AAFF;">.</span><span style="color:#A6ACCD;"> -B build</span></span>
<span class="line"></span></code></pre></div><p>Don&#39;t be afraid of the long line, it&#39;s defining a lot of values you should change yourself. The version is combined as <code>major.minor.patch</code>.</p><details class="details custom-block"><summary>CMake gui</summary><p>You can also configure the project using <code>cmake-gui</code> which comes shipped with CMake by default!</p><p>Select the folder where you cloned to and create a folder where to build to (<code>build</code> in the screenshot below), then press configure. <img src="/sapiens-modding-wiki/assets/cmake-gui.5c17440b.png" alt=""></p><p>In the window that opens select the Visual Studio version you installed and press <code>Finish</code>. After this all settings show up in a nice gui!</p></details><p>After this you can build the mod.</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> build</span></span>
<span class="line"><span style="color:#A6ACCD;">cmake --build </span><span style="color:#82AAFF;">.</span></span>
<span class="line"></span></code></pre></div><p>You can then find the build mod in <code>build/[MOD ID]</code>, it should contain one file and one folder.</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ls</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">     Directory: MyCMod\build\MyCMod</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Mode                 LastWriteTime         Length Name</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> ----                 -------------         ------ ----</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> d----          19/08/2022    16:53                lib</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> -a---          19/08/2022    14:46            300 modInfo.lua</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">     Directory: MyCMod\build\MyCMod\lib</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Mode                 LastWriteTime         Length Name</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> ----                 -------------         ------ ----</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> -a---          19/08/2022    16:53          52224 MyCMod.dll</span></span>
<span class="line"></span></code></pre></div><h4 id="clion-setup" tabindex="-1">CLion Setup <a class="header-anchor" href="#clion-setup" aria-hidden="true">#</a></h4><p>Create a new project from version control by selecting <code>File =&gt; New =&gt; Project from Version Control</code>, in the UI that pops up enter your Git URL. Select where to clone to and press <code>Clone</code>.</p><details class="details custom-block"><summary>GitHub Authentication</summary><p>CLion may ask you to authenticate with GitHub, press <code>Login</code> and follow the instructions to authenticate with GitHub</p></details><p>After cloning finishes a window pops up asking for configuration. <img src="/sapiens-modding-wiki/assets/clion-open-project-wizard.78fdd93c.png" alt=""> In the <code>Toolchain</code> make sure it uses <code>Visual Studio</code>, if <code>Visual Studio</code> is not available press <code>Manage toolchains</code> and add a <code>Visual Studio</code> toolchain.</p><p>Press <code>Ok</code> to continue.</p><p>Now it&#39;s time to configure all settings. Open the <code>CMake</code> tab at the bottom, press the small gear at the left of the tab and open <code>CMake Settings</code>. In the tab that opens you can configure the <code>Cache variables</code> by opening the <code>Cache variables</code> dropdown if it&#39;s not opened by default. Change the values to match your mod (Name, Description, etc.) and press <code>Apply</code>.</p><p>You can now build your mod by pressing the green hammer at the top. By default CLion uses the <code>cmake-build-debug</code> folder, in here a folder with as name your chosen Mod ID will be created which you can copy over to the game&#39;s mod folder (or create a symlink to).</p><h3 id="spvanilla" tabindex="-1">SPVanilla <a class="header-anchor" href="#spvanilla" aria-hidden="true">#</a></h3><p>The <a href="https://github.com/Majic-Jungle/splugins/tree/main/SPVanilla" target="_blank" rel="noopener noreferrer">splugins</a> repository contains the vanilla code, this can be used as a reference when working on your own mod.</p><h3 id="symlinks" tabindex="-1">Symlinks <a class="header-anchor" href="#symlinks" aria-hidden="true">#</a></h3><p>A symlink to your mod can be made for easy development, making it so you do not have to manually copy the folder to the game&#39;s mods folder every time you compile. The template can setup this symlink automatically, to do this the project should be configured with <code>AUTO_GENERATE_SAPIENS_MOD_SYMLINK</code> set to <code>ON</code> and with admin permissions. The symlink can also be manually made by running <code>ni [YOUR MOD NAME] -i SymbolicLink -ta [PATH TO WHERE YOUR MOD COMPILES TO]</code> in a powershell instance with admin privileges.</p><h2 id="vertex-terrain-generation" tabindex="-1">Vertex Terrain Generation <a class="header-anchor" href="#vertex-terrain-generation" aria-hidden="true">#</a></h2><p>Vertex Terrain generation determines the height of every point in the world. This height is represented in the <a href="/sapiens-modding-wiki/docs/coordinates.html">prerender coordinate scale</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can convert meters into the prerender scale by using the <code>SP_METERS_TO_PRERENDER</code> macro:</p><div class="language-c"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> heightInPrerenderScale </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SP_METERS_TO_PRERENDER</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">heightInMeters</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div></div><p>Most of the paramaters are still a mystery.</p><p>The <code>pointNormal</code> parameter is the location on the planet normalised, you can imagine it as sampling points on a sphere with <code>(0,0,0)</code> as the center and a radius of <code>1</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can calculate the latitude and longitude as follows:</p><div class="language-c"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> lat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">asin</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">pointNormal.y</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> lon </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">fabs</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">pointNormal.x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fabs</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">pointNormal.z</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0000001</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        lon </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">atan2</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">pointNormal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pointNormal</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Some points are <code>NaN</code>, the vanilla implementation returns <code>NaN</code> at these points. Returning anything else seems to cause artifacts on the equator of the planet.</p></div><p>The return value from te function is a vector with 4 components. The first component is the height, the other components are currently unknown and in the vanilla implementation always <code>riverDistance</code>, <code>0</code> and <code>0</code> respectively.</p><p>Below is the code for the <code>FlatTerrainMod</code> which returns a height of 10 for every position in the world and generates a planet that has flat terrain.</p><div class="language-c"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SPHeight.h</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">spReplacesPreviousHeight</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">true;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">SPVec4 </span><span style="color:#82AAFF;">spHeightGet</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SPVec4 previousHeight</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//if spReplacesPreviousHeight returns false, then previousHeight is the output of the previous mod, otherwise it should be ignored.</span></span>
<span class="line"><span style="color:#A6ACCD;">                   SPNoise</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> noise1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   SPNoise</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> noise2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   SPVec3 pointNormal</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   SPVec3 noiseLoc</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   SPWorldGenOptions worldGenOptions</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> riverValue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                   </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> riverDistance</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    SPVec4 result </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#82AAFF;">SP_METERS_TO_PRERENDER</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">),</span><span style="color:#F07178;"> riverDistance</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><details class="details custom-block"><summary>Result of the above code</summary><p><img src="/sapiens-modding-wiki/assets/flat-planet-result.6d719821.png" alt=""></p></details><h2 id="biome-and-climate-assignment" tabindex="-1">Biome and Climate assignment <a class="header-anchor" href="#biome-and-climate-assignment" aria-hidden="true">#</a></h2><p>It&#39;s currently unknown how biome and climate assignment works, the vanilla implementation can be found in the <a href="https://github.com/Majic-Jungle/splugins/blob/main/SPVanilla/src/SPBiome.c" target="_blank" rel="noopener noreferrer">splugins</a> repository.</p><h2 id="particle-engine" tabindex="-1">Particle Engine <a class="header-anchor" href="#particle-engine" aria-hidden="true">#</a></h2><p>It&#39;s currently unknown how the particle engine works, the vanilla implementation can be found in the <a href="https://github.com/Majic-Jungle/splugins/blob/main/SPVanilla/src/SPParticles.c" target="_blank" rel="noopener noreferrer">splugins</a> repository.</p><h2 id="common-mistakes" tabindex="-1">Common mistakes <a class="header-anchor" href="#common-mistakes" aria-hidden="true">#</a></h2><p>Some mistakes are easy to make, here is a list of mistakes that are commonly made and their fixes.</p><h3 id="wrong-folder-name" tabindex="-1">Wrong folder name <a class="header-anchor" href="#wrong-folder-name" aria-hidden="true">#</a></h3><p>The folder in the root folder should be named <code>lib</code> and not <code>libs</code>, if it&#39;s the wrong name the game will not load anything nor throw an error.</p><h3 id="file-in-use-or-cannot-open-file-your-dll" tabindex="-1"><code>File in use</code> or <code>Cannot open file [your.dll]</code> <a class="header-anchor" href="#file-in-use-or-cannot-open-file-your-dll" aria-hidden="true">#</a></h3><p>When the game has loaded the mod it will keep it loaded in memory until the game is closed, this means that after testing the mod you always need to fully close the game before you can recompile or overwrite the dll. Just closing the world or going back to the main screen is not enough. Even unchecking the mod in the mods selector is not enough.</p></div></div></main><footer class="VPDocFooter" data-v-07502c4e data-v-176f99de><div class="edit-info" data-v-176f99de><div class="edit-link" data-v-176f99de><a class="VPLink link edit-link-button" href="https://github.com/SirLich/sapiens-modding-wiki/edit/master/docs/docs/c-mods.md" target="_blank" rel="noopener noreferrer" data-v-176f99de data-v-5704c677><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-176f99de><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page<!--]--><!----></a></div><div class="last-updated" data-v-176f99de><p class="VPLastUpdated" data-v-176f99de data-v-0ce8c960>Last updated: <time datatime="2022-08-19T16:47:04.000Z" data-v-0ce8c960></time></p></div></div><div class="prev-next" data-v-176f99de><div class="pager" data-v-176f99de><a class="pager-link prev" href="/sapiens-modding-wiki/docs/timers.html" data-v-176f99de><span class="desc" data-v-176f99de>Previous page</span><span class="title" data-v-176f99de>Timers</span></a></div><div class="has-prev pager" data-v-176f99de><a class="pager-link next" href="/sapiens-modding-wiki/docs/notes.html" data-v-176f99de><span class="desc" data-v-176f99de>Next page</span><span class="title" data-v-176f99de>Miscellaneous</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docs_bridge.md\":\"57d30a73\",\"docs_c-mods.md\":\"944a976f\",\"docs_cheat.md\":\"cac278aa\",\"docs_coordinates.md\":\"9cb894b3\",\"docs_creating-ui.md\":\"58f59410\",\"docs_edge-decals.md\":\"4f77b84f\",\"docs_game-saves.md\":\"fd79e648\",\"docs_handling-input.md\":\"6ea65d36\",\"docs_materials.md\":\"20e55430\",\"docs_mobs.md\":\"60485b75\",\"docs_mod-types.md\":\"4798ceba\",\"docs_model-format.md\":\"9f3f30e1\",\"docs_notes.md\":\"aa4ce1da\",\"docs_shaders.md\":\"5a7cfa66\",\"docs_thread-management.md\":\"a806cfd8\",\"docs_timers.md\":\"7e7e3a6a\",\"guide_common-issues.md\":\"34000a96\",\"guide_getting-started.md\":\"19911166\",\"guide_shadowing.md\":\"d646be99\",\"hammerstone_getting-started.md\":\"cc6c2640\",\"hammerstone_input-manager.md\":\"8c4ee8ec\",\"hammerstone_installing.md\":\"2e547d0a\",\"hammerstone_introduction.md\":\"bf23a9e1\",\"hammerstone_logger.md\":\"d2e2e125\",\"hammerstone_save-state.md\":\"35b90790\",\"hammerstone_ui-manager.md\":\"6cbdfad2\",\"index.md\":\"c1a9502c\"}")</script>
    <script type="module" async src="/sapiens-modding-wiki/assets/app.da2dc732.js"></script>
    
  </body>
</html>